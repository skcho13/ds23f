<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Midterm –  Data Analysis &amp; Visualization</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-3e062e8fe420344c07f1e837915f9541.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-55b2b16ef464b1d24caa77f57887db60.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-5b0e1abfa7b260a7547a9d73df142e4a.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-20f56965e95c736e2c02136d799c44de.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-5R1D200E6D"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-5R1D200E6D', { 'anonymize_ip': true});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<meta property="og:title" content="Midterm –  Data Analysis &amp; Visualization">
<meta property="og:description" content="Data Analysis and Visualization, Dongguk University, 2024-2">
<meta property="og:image" content="https://dgdavs.modellings.art/contents/midterm948_files/figure-html/cell-6-output-1.png">
<meta property="og:site_name" content="Data Analysis and Visualization in Python">
<meta property="og:image:height" content="737">
<meta property="og:image:width" content="1112">
</head>

<body>

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#a.-다음은-어느-웨이터의-팁에-관한-tips-데이터를-이용한-질문입니다." id="toc-a.-다음은-어느-웨이터의-팁에-관한-tips-데이터를-이용한-질문입니다." class="nav-link active" data-scroll-target="#a.-다음은-어느-웨이터의-팁에-관한-tips-데이터를-이용한-질문입니다.">A. 다음은 어느 웨이터의 팁에 관한 tips 데이터를 이용한 질문입니다.</a>
  <ul>
  <li><a href="#a-1.-점심-저녁-때에-따른-식사비와-팁의-관계를-알아보기-위해-다음과-같은-시각화를-위한-코드를-짜보세요.-5" id="toc-a-1.-점심-저녁-때에-따른-식사비와-팁의-관계를-알아보기-위해-다음과-같은-시각화를-위한-코드를-짜보세요.-5" class="nav-link" data-scroll-target="#a-1.-점심-저녁-때에-따른-식사비와-팁의-관계를-알아보기-위해-다음과-같은-시각화를-위한-코드를-짜보세요.-5">A-1. 점심, 저녁 때에 따른 식사비와 팁의 관계를 알아보기 위해 다음과 같은 시각화를 위한 코드를 짜보세요. (5)</a></li>
  <li><a href="#a-2.-요일에-따른-팁의-분포를-보기-위한-다음과-같은-시각화를-위한-코드를-짜보세요.-10" id="toc-a-2.-요일에-따른-팁의-분포를-보기-위한-다음과-같은-시각화를-위한-코드를-짜보세요.-10" class="nav-link" data-scroll-target="#a-2.-요일에-따른-팁의-분포를-보기-위한-다음과-같은-시각화를-위한-코드를-짜보세요.-10">A-2. 요일에 따른 팁의 분포를 보기 위한 다음과 같은 시각화를 위한 코드를 짜보세요. (10)</a></li>
  <li><a href="#a-3.-요일에-따른-팁의-분포가-성별과-흡연자-유무에-따라-다른가를-보기-위한-다음과-같은-시각화를-위한-코드를-짜보세요.-10" id="toc-a-3.-요일에-따른-팁의-분포가-성별과-흡연자-유무에-따라-다른가를-보기-위한-다음과-같은-시각화를-위한-코드를-짜보세요.-10" class="nav-link" data-scroll-target="#a-3.-요일에-따른-팁의-분포가-성별과-흡연자-유무에-따라-다른가를-보기-위한-다음과-같은-시각화를-위한-코드를-짜보세요.-10">A-3. 요일에 따른 팁의 분포가 성별과 흡연자 유무에 따라 다른가를 보기 위한 다음과 같은 시각화를 위한 코드를 짜보세요. (10)</a></li>
  <li><a href="#a-4.-요일에-따른-흡연자의-비율을-알아보기-위한-다음과-같은-시각화를-위한-코드를-짜보세요.-10" id="toc-a-4.-요일에-따른-흡연자의-비율을-알아보기-위한-다음과-같은-시각화를-위한-코드를-짜보세요.-10" class="nav-link" data-scroll-target="#a-4.-요일에-따른-흡연자의-비율을-알아보기-위한-다음과-같은-시각화를-위한-코드를-짜보세요.-10">A-4. 요일에 따른 흡연자의 비율을 알아보기 위한 다음과 같은 시각화를 위한 코드를 짜보세요. (10)</a></li>
  <li><a href="#a-5.-요일에-따른-팁의-평균mean-중앙값median-값의-개수count를-함께-보기-위해" id="toc-a-5.-요일에-따른-팁의-평균mean-중앙값median-값의-개수count를-함께-보기-위해" class="nav-link" data-scroll-target="#a-5.-요일에-따른-팁의-평균mean-중앙값median-값의-개수count를-함께-보기-위해">A-5. 요일에 따른 팁의 평균(mean), 중앙값(median), 값의 개수(count)를 함께 보기 위해</a></li>
  <li><a href="#a6.-다음와-같은-시각화를-통해-요일별로-팁을-받은-개수에-대한-남녀의-비율을-보고자-합니다.-20" id="toc-a6.-다음와-같은-시각화를-통해-요일별로-팁을-받은-개수에-대한-남녀의-비율을-보고자-합니다.-20" class="nav-link" data-scroll-target="#a6.-다음와-같은-시각화를-통해-요일별로-팁을-받은-개수에-대한-남녀의-비율을-보고자-합니다.-20">A6. 다음와 같은 시각화를 통해 요일별로 팁을 받은 개수에 대한 남녀의 비율을 보고자 합니다. (20)</a></li>
  <li><a href="#a-7.-서빙-강도에-따른-팁-분석" id="toc-a-7.-서빙-강도에-따른-팁-분석" class="nav-link" data-scroll-target="#a-7.-서빙-강도에-따른-팁-분석">A-7. 서빙 강도에 따른 팁 분석</a></li>
  </ul></li>
  <li><a href="#b.-다음은-nycflight13패키지의-데이터셋를-이용한-질문입니다." id="toc-b.-다음은-nycflight13패키지의-데이터셋를-이용한-질문입니다." class="nav-link" data-scroll-target="#b.-다음은-nycflight13패키지의-데이터셋를-이용한-질문입니다.">B. 다음은 nycflight13패키지의 데이터셋를 이용한 질문입니다.</a>
  <ul>
  <li><a href="#b-1.-항공사carrier-별로-1-실제-출항한-항공편의-수와-2-결항된-항공편의-수를-크기-순으로-다음과-같이-시각화해보세요.-디테일은-무시-15" id="toc-b-1.-항공사carrier-별로-1-실제-출항한-항공편의-수와-2-결항된-항공편의-수를-크기-순으로-다음과-같이-시각화해보세요.-디테일은-무시-15" class="nav-link" data-scroll-target="#b-1.-항공사carrier-별로-1-실제-출항한-항공편의-수와-2-결항된-항공편의-수를-크기-순으로-다음과-같이-시각화해보세요.-디테일은-무시-15">B-1. 항공사(<code>carrier</code>) 별로 1) 실제 출항한 항공편의 수와 2) 결항된 항공편의 수를 크기 순으로 다음과 같이 시각화해보세요. (디테일은 무시) (15)</a></li>
  <li><a href="#b-2.-위-플랏에서-결항된-항공편이-많은-상위-3개의-항공사ev-mq-9e만로-flights-데이터를-필터링하여-다음과-같은-것을-알아봅니다." id="toc-b-2.-위-플랏에서-결항된-항공편이-많은-상위-3개의-항공사ev-mq-9e만로-flights-데이터를-필터링하여-다음과-같은-것을-알아봅니다." class="nav-link" data-scroll-target="#b-2.-위-플랏에서-결항된-항공편이-많은-상위-3개의-항공사ev-mq-9e만로-flights-데이터를-필터링하여-다음과-같은-것을-알아봅니다.">B-2. 위 플랏에서 결항된 항공편이 많은 상위 3개의 항공사(EV, MQ, 9E)만로 <code>flights</code> 데이터를 필터링하여, 다음과 같은 것을 알아봅니다.</a></li>
  <li><a href="#b-3.-출발지연dep_delay이-날씨에-의해-얼마나-영향을-받았는지-알아보고자-합니다." id="toc-b-3.-출발지연dep_delay이-날씨에-의해-얼마나-영향을-받았는지-알아보고자-합니다." class="nav-link" data-scroll-target="#b-3.-출발지연dep_delay이-날씨에-의해-얼마나-영향을-받았는지-알아보고자-합니다.">B-3. 출발지연(<code>dep_delay</code>)이 날씨에 의해 얼마나 영향을 받았는지 알아보고자 합니다.</a></li>
  </ul></li>
  <li><a href="#c.-다음은-movielens-1m-dataset을-이용한-질문입니다." id="toc-c.-다음은-movielens-1m-dataset을-이용한-질문입니다." class="nav-link" data-scroll-target="#c.-다음은-movielens-1m-dataset을-이용한-질문입니다.">C. 다음은 MovieLens 1M Dataset을 이용한 질문입니다.</a>
  <ul>
  <li><a href="#c-1.-우선-ratings-데이터에서-개인별로-몇-개의-영화를-평가했는지를-groupby를-이용해-구한-후-그-결과를-이용해-다음과-같이-개인별-평가-개수에-대한-분포를-frequency-polygon-스타일로-시각화해보세요.-10" id="toc-c-1.-우선-ratings-데이터에서-개인별로-몇-개의-영화를-평가했는지를-groupby를-이용해-구한-후-그-결과를-이용해-다음과-같이-개인별-평가-개수에-대한-분포를-frequency-polygon-스타일로-시각화해보세요.-10" class="nav-link" data-scroll-target="#c-1.-우선-ratings-데이터에서-개인별로-몇-개의-영화를-평가했는지를-groupby를-이용해-구한-후-그-결과를-이용해-다음과-같이-개인별-평가-개수에-대한-분포를-frequency-polygon-스타일로-시각화해보세요.-10">C-1. 우선, <code>ratings</code> 데이터에서 <strong>개인별</strong>로 몇 개의 영화를 평가했는지를 <code>groupby</code>를 이용해 구한 후, 그 결과를 이용해 다음과 같이 개인별 평가 개수에 대한 분포를 frequency polygon 스타일로 시각화해보세요. (10)</a></li>
  <li><a href="#c-2.-수업-과제에서-살펴보았듯이-개인별로-평가에-대한-편향성이-존재합니다.-이를-해결하기-위한-한-방법으로-개인별로-평점을-표준화해서-이후-진행하려고-합니다.-10" id="toc-c-2.-수업-과제에서-살펴보았듯이-개인별로-평가에-대한-편향성이-존재합니다.-이를-해결하기-위한-한-방법으로-개인별로-평점을-표준화해서-이후-진행하려고-합니다.-10" class="nav-link" data-scroll-target="#c-2.-수업-과제에서-살펴보았듯이-개인별로-평가에-대한-편향성이-존재합니다.-이를-해결하기-위한-한-방법으로-개인별로-평점을-표준화해서-이후-진행하려고-합니다.-10">C-2. 수업 과제에서 살펴보았듯이 개인별로 평가에 대한 편향성이 존재합니다. 이를 해결하기 위한 한 방법으로, <strong>개인별로</strong> 평점을 <strong>표준화</strong>해서 이후 진행하려고 합니다. (10)</a></li>
  <li><a href="#c-3.-영화movie_id와-성별gender에-따른-표준화된-평점rating_z의-평균을-구하기-위해" id="toc-c-3.-영화movie_id와-성별gender에-따른-표준화된-평점rating_z의-평균을-구하기-위해" class="nav-link" data-scroll-target="#c-3.-영화movie_id와-성별gender에-따른-표준화된-평점rating_z의-평균을-구하기-위해">C-3. 영화(<code>movie_id</code>)와 성별(<code>gender</code>)에 따른 표준화된 평점(<code>rating_z</code>)의 평균을 구하기 위해</a></li>
  <li><a href="#c-4.-장르와-성별-내에서-평균-평점이-높은-순으로-순위를-매기기-위해서" id="toc-c-4.-장르와-성별-내에서-평균-평점이-높은-순으로-순위를-매기기-위해서" class="nav-link" data-scroll-target="#c-4.-장르와-성별-내에서-평균-평점이-높은-순으로-순위를-매기기-위해서">C-4. <strong>장르와 성별 내</strong>에서 평균 평점이 높은 순으로 순위를 매기기 위해서,</a></li>
  <li><a href="#c-5.-이제-c-4의-테이블을-이용하여-장르와-성별에-따라-표준화된-평점-평균이-가장-높은-영화-한편씩을-보여주는-다음과-같은-테이블을-구합니다.-10" id="toc-c-5.-이제-c-4의-테이블을-이용하여-장르와-성별에-따라-표준화된-평점-평균이-가장-높은-영화-한편씩을-보여주는-다음과-같은-테이블을-구합니다.-10" class="nav-link" data-scroll-target="#c-5.-이제-c-4의-테이블을-이용하여-장르와-성별에-따라-표준화된-평점-평균이-가장-높은-영화-한편씩을-보여주는-다음과-같은-테이블을-구합니다.-10">C-5. 이제 (C-4)의 테이블을 이용하여, 장르와 성별에 따라 <strong>표준화된 평점</strong> 평균이 가장 높은 영화 한편씩을 보여주는 다음과 같은 테이블을 구합니다. (10)</a></li>
  <li><a href="#c-6.-이번에는-장르별-평점의-분포-차이를-살펴보는데" id="toc-c-6.-이번에는-장르별-평점의-분포-차이를-살펴보는데" class="nav-link" data-scroll-target="#c-6.-이번에는-장르별-평점의-분포-차이를-살펴보는데">C-6. 이번에는 장르별 평점의 분포 차이를 살펴보는데,</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Midterm</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>총점 255</p>
<section id="a.-다음은-어느-웨이터의-팁에-관한-tips-데이터를-이용한-질문입니다." class="level2">
<h2 class="anchored" data-anchor-id="a.-다음은-어느-웨이터의-팁에-관한-tips-데이터를-이용한-질문입니다.">A. 다음은 어느 웨이터의 팁에 관한 tips 데이터를 이용한 질문입니다.</h2>
<div>

</div>
<div class="quarto-layout-panel" data-layout="[1, 1]">
<div class="quarto-layout-row">
<div id="first-column" class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<ul>
<li>total_bill: 음식값($)<br>
</li>
<li>tip: 팁($)<br>
</li>
<li>sex: 팁을 준 사람의 성별<br>
</li>
<li>smoker: 테이블에 흡연자 유무<br>
</li>
</ul>
</div>
<div id="second-column" class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<ul>
<li>day: 요일<br>
</li>
<li>time: 점심/저녁 시간<br>
</li>
<li>size: 테이블의 손님 수</li>
</ul>
</div>
</div>
</div>
<div id="cell-5" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load the dataset</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>tips <span class="op">=</span> sns.load_dataset(<span class="st">"tips"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="a-1.-점심-저녁-때에-따른-식사비와-팁의-관계를-알아보기-위해-다음과-같은-시각화를-위한-코드를-짜보세요.-5" class="level4">
<h4 class="anchored" data-anchor-id="a-1.-점심-저녁-때에-따른-식사비와-팁의-관계를-알아보기-위해-다음과-같은-시각화를-위한-코드를-짜보세요.-5">A-1. 점심, 저녁 때에 따른 식사비와 팁의 관계를 알아보기 위해 다음과 같은 시각화를 위한 코드를 짜보세요. (5)</h4>
<ul>
<li>fitted line은 2차 다항함수로 합니다.</li>
</ul>
<div id="cell-7" class="cell" data-execution_count="5">
<div class="cell-output cell-output-display" data-execution_count="5">
<div>
<figure class="figure">
<p><img src="midterm948_files/figure-html/cell-6-output-1.png" width="556" height="369" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="a-2.-요일에-따른-팁의-분포를-보기-위한-다음과-같은-시각화를-위한-코드를-짜보세요.-10" class="level4">
<h4 class="anchored" data-anchor-id="a-2.-요일에-따른-팁의-분포를-보기-위한-다음과-같은-시각화를-위한-코드를-짜보세요.-10">A-2. 요일에 따른 팁의 분포를 보기 위한 다음과 같은 시각화를 위한 코드를 짜보세요. (10)</h4>
<ul>
<li>bins의 폭은 $1로 설정하세요.</li>
<li>y축은 팁의 비율로 표시하세요.</li>
<li>각 요일 내에서의 비율이 되도록 하세요. (즉, 요일별로 높이의 합이 1)</li>
</ul>
<div id="cell-9" class="cell" data-execution_count="6">
<div class="cell-output cell-output-display" data-execution_count="6">
<div>
<figure class="figure">
<p><img src="midterm948_files/figure-html/cell-7-output-1.png" width="563" height="369" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="a-3.-요일에-따른-팁의-분포가-성별과-흡연자-유무에-따라-다른가를-보기-위한-다음과-같은-시각화를-위한-코드를-짜보세요.-10" class="level4">
<h4 class="anchored" data-anchor-id="a-3.-요일에-따른-팁의-분포가-성별과-흡연자-유무에-따라-다른가를-보기-위한-다음과-같은-시각화를-위한-코드를-짜보세요.-10">A-3. 요일에 따른 팁의 분포가 성별과 흡연자 유무에 따라 다른가를 보기 위한 다음과 같은 시각화를 위한 코드를 짜보세요. (10)</h4>
<ul>
<li>디테일은 무시하시고,</li>
<li>수업시간에 boxplot의 대체로 이용했던 시각화로, median과 25%, 75% quantile range가 표시되도록 하세요.</li>
<li>2x2 grid로 나타나도록 facetting을 하세요.</li>
</ul>
<div id="cell-13" class="cell" data-execution_count="8">
<div class="cell-output cell-output-display" data-execution_count="8">
<div>
<figure class="figure">
<p><img src="midterm948_files/figure-html/cell-10-output-1.png" width="650" height="465" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="a-4.-요일에-따른-흡연자의-비율을-알아보기-위한-다음과-같은-시각화를-위한-코드를-짜보세요.-10" class="level4">
<h4 class="anchored" data-anchor-id="a-4.-요일에-따른-흡연자의-비율을-알아보기-위한-다음과-같은-시각화를-위한-코드를-짜보세요.-10">A-4. 요일에 따른 흡연자의 비율을 알아보기 위한 다음과 같은 시각화를 위한 코드를 짜보세요. (10)</h4>
<ul>
<li>별도의 계산없이 seaborn.objects의 함수로 직접 구현하세요.</li>
</ul>
<div id="cell-15" class="cell" data-execution_count="30">
<div class="cell-output cell-output-display" data-execution_count="30">
<div>
<figure class="figure">
<p><img src="midterm948_files/figure-html/cell-11-output-1.png" width="650" height="369" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="a-5.-요일에-따른-팁의-평균mean-중앙값median-값의-개수count를-함께-보기-위해" class="level4">
<h4 class="anchored" data-anchor-id="a-5.-요일에-따른-팁의-평균mean-중앙값median-값의-개수count를-함께-보기-위해">A-5. 요일에 따른 팁의 평균(mean), 중앙값(median), 값의 개수(count)를 함께 보기 위해</h4>
<p>&nbsp;1) 요일에 따른 세 통계치를 다음과 같이 DataFrame으로 구한 후, (5)</p>
<div>

</div>
<div id="cell-19" class="cell quarto-layout-panel" data-execution_count="34" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<pre><code>    day mean median count
0  Thur    .      .     .
1   Fri    .      .     .
2   Sat    .      .     .
3   Sun    .      .     .</code></pre>
</div>
</div>
</div>
<p>&nbsp;2) (1)의 결과를 이용해 다음과 같이 시각화해보세요. (디테일은 무시) (15)</p>
<ul>
<li>median은 오렌지 색(<code>orange</code>)으로, mean은 빨강색(<code>red</code>)로 표시하고, 점의 크기에 <code>count</code>를 mapping하세요.</li>
<li>점의 크기는 <code>pointsize=(5, 15)</code>를 활용해서 조정하세요.</li>
<li>목요일에 median과 mean이 다른 요일에 비해 큰 차이가 나는데 <strong>그 이유를 팁을 어떻게 받았을지를 고려해서 추론/기술해보세요</strong>.</li>
</ul>
<div id="cell-21" class="cell" data-execution_count="100">
<div class="cell-output cell-output-display" data-execution_count="100">
<div>
<figure class="figure">
<p><img src="midterm948_files/figure-html/cell-15-output-1.png" width="549" height="369" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="a6.-다음와-같은-시각화를-통해-요일별로-팁을-받은-개수에-대한-남녀의-비율을-보고자-합니다.-20" class="level4">
<h4 class="anchored" data-anchor-id="a6.-다음와-같은-시각화를-통해-요일별로-팁을-받은-개수에-대한-남녀의-비율을-보고자-합니다.-20">A6. 다음와 같은 시각화를 통해 요일별로 팁을 받은 개수에 대한 남녀의 비율을 보고자 합니다. (20)</h4>
<p>&nbsp;1) 아래와 같이 “요일(<code>day</code>)과 성별(<code>sex</code>)”에 따른 팁을 받은 개수(<code>count</code>), 요일별 받은 팁의 개수(<code>total_per_day</code>), 이 둘의 비율(<code>prop</code>)을 포함한 테이블을 만드세요. (10)</p>
<div id="cell-24" class="cell" data-execution_count="36">
<div class="cell-output cell-output-display" data-execution_count="36">
<pre><code>    day     sex count total_per_day prop
0  Thur    Male    30            62 0.48
1  Thur  Female    32            62 0.52
2   Fri    Male    10            19 0.53
3   Fri  Female     9            19 0.47
4     .       .     .             .    .
5     .       .     .             .    .
6     .       .     .             .    .
7     .       .     .             .    .</code></pre>
</div>
</div>
<p>&nbsp;2) 위 테이블을 이용해 다음과 같은 시각화를 해보세요. (10)</p>
<div id="cell-26" class="cell" data-execution_count="103">
<div class="cell-output cell-output-display" data-execution_count="103">
<div>
<figure class="figure">
<p><img src="midterm948_files/figure-html/cell-18-output-1.png" width="581" height="321" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="a-7.-서빙-강도에-따른-팁-분석" class="level4">
<h4 class="anchored" data-anchor-id="a-7.-서빙-강도에-따른-팁-분석">A-7. 서빙 강도에 따른 팁 분석</h4>
<p>웨이터로서 서빙하는 강도가 테이블의 손님 수에 비례한다고 가정합니다. 예를 들어, 1명 손님(table size 1) 테이블을 서빙하는데 비해 5명 손님(table size 5) 테이블을 서빙하는데 5배로 힘들다고 가정합니다. 웨이터가 노동 대비 팁을 최대로 받고자 하는데, 즉, 손님 한명 당 팁을 얼마 받게 되는지를 계산하여 (팁은 한 테이블 당 한번 받습니다.) 언제 몇 명의 손님 테이블을 서빙할 때, 노력 대비 최대의 팁을 얻게 될지에 대해서 다음 과정을 통해 분석하고 간단히 결론을 내려보세요. (주말 여부와 점심/저녁 여부에 따라 살펴봅니다.)</p>
<p>&nbsp;1) “주말(토,일) 여부”에 대한 변수(<code>weekend</code>)와 “한 손님 당 팁”에 해당하는 변수(<code>tip_per_person</code>)을 추가하고, (5)</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#     total_bill tip sex smoker day time size weekend tip_per_person</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 0            .   .   .      .   .    .    .       .              .</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1            .   .   .      .   .    .    .       .              .</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 2            .   .   .      .   .    .    .       .              .</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>...</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>&nbsp;2) 주말여부(<code>weekend</code>), 점심/저녁 여부(<code>time</code>), 테이블 사이즈(<code>size</code>)의 따른 “한 손님 당 팁(<code>tip_per_person</code>)”의 평균값을 DataFrame으로 구한 후, (5)</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#    weekend time size mean_tip_pp</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 0        .    .    .           .</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1        .    .    .           .</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 2        .    .    .           .</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>...</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>&nbsp;3) 이를 이용해 대략 다음과 같은 시각화를 해보고 (디테일은 무시), 이 플랏에서 발견되는 패턴에 대해 간단히 언급하고, 결론을 기술해보세요. (10)</p>
<div id="cell-35" class="cell" data-execution_count="39">
<div class="cell-output cell-output-display" data-execution_count="39">
<div>
<figure class="figure">
<p><img src="midterm948_files/figure-html/cell-24-output-1.png" width="576" height="369" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="b.-다음은-nycflight13패키지의-데이터셋를-이용한-질문입니다." class="level2">
<h2 class="anchored" data-anchor-id="b.-다음은-nycflight13패키지의-데이터셋를-이용한-질문입니다.">B. 다음은 nycflight13패키지의 데이터셋를 이용한 질문입니다.</h2>
<p>데이터셋 import</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>flights <span class="op">=</span> sm.datasets.get_rdataset(<span class="st">"flights"</span>, <span class="st">"nycflights13"</span>).data</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>weather <span class="op">=</span> sm.datasets.get_rdataset(<span class="st">"weather"</span>, <span class="st">"nycflights13"</span>).data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>또는 파일 다운로드 <a href="https://www.dropbox.com/s/pi2cdupismpabzj/flights.csv?dl=1">flights.csv</a>, <a href="https://www.dropbox.com/s/6siahu6jfgk7zq6/weather.csv?dl=1">weather.csv</a></p>
<p>다음 코드를 이용해 중복된 값을 제거하고 진행하세요.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>weather.drop_duplicates(subset<span class="op">=</span>[<span class="st">"origin"</span>, <span class="st">"year"</span>, <span class="st">"month"</span>, <span class="st">"day"</span>, <span class="st">"hour"</span>], inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="b-1.-항공사carrier-별로-1-실제-출항한-항공편의-수와-2-결항된-항공편의-수를-크기-순으로-다음과-같이-시각화해보세요.-디테일은-무시-15" class="level4">
<h4 class="anchored" data-anchor-id="b-1.-항공사carrier-별로-1-실제-출항한-항공편의-수와-2-결항된-항공편의-수를-크기-순으로-다음과-같이-시각화해보세요.-디테일은-무시-15">B-1. 항공사(<code>carrier</code>) 별로 1) 실제 출항한 항공편의 수와 2) 결항된 항공편의 수를 크기 순으로 다음과 같이 시각화해보세요. (디테일은 무시) (15)</h4>
<ul>
<li>결항된 항공편인지에 대한 여부는 <code>dep_delay</code>값이 missing인 경우로 판단하고,</li>
<li>결항된 항공편을 표시하는 컬럼(<code>cancel</code>)을 만든 후,</li>
<li>항공편의 수를 따로 구하지 말고 seaborn.objects로 직접 시각화해보세요.</li>
<li>x축의 Bar 표시 순서는 결항여부에 무관하게 “총 항공편 수가 많은” 항공사 순으로 하세요.</li>
<li>y축의 눈금은 공유하지 않도록 하세요.</li>
</ul>
<div id="cell-41" class="cell" data-execution_count="51">
<div class="cell-output cell-output-display" data-execution_count="51">
<div>
<figure class="figure">
<p><img src="midterm948_files/figure-html/cell-27-output-1.png" width="599" height="445" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="b-2.-위-플랏에서-결항된-항공편이-많은-상위-3개의-항공사ev-mq-9e만로-flights-데이터를-필터링하여-다음과-같은-것을-알아봅니다." class="level4">
<h4 class="anchored" data-anchor-id="b-2.-위-플랏에서-결항된-항공편이-많은-상위-3개의-항공사ev-mq-9e만로-flights-데이터를-필터링하여-다음과-같은-것을-알아봅니다.">B-2. 위 플랏에서 결항된 항공편이 많은 상위 3개의 항공사(EV, MQ, 9E)만로 <code>flights</code> 데이터를 필터링하여, 다음과 같은 것을 알아봅니다.</h4>
<p>수업 과제에서 대략 하루 중 오전부터 시간이 지남에 따라 항공편의 지연이 증가하는 것을 보았습니다. 이번에는 항공사별로 시간대(<code>hour</code>)에 따른 도착 지연 여부의 비율이 달(<code>month</code>)에 따라 변화하는지를 보고자 합니다.</p>
<p>&nbsp;1) 30분 넘게 도착이 지연되었는지 여부(즉, <code>arr_delay &gt; 30</code>의 여부)를 표시하는 변수를 만든 후, 항공사(<code>carrier</code>), 달(<code>month</code>), 시간(<code>hour</code>)에 따라 30분 이상 도착 지연된 항공편의 <strong>비율</strong>(즉, <code>arr_delay &gt; 30</code>인 항공편의 비율)을 다음과 같은 형태로 구합니다. (10)</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#     carrier month hour delay_prop</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 0         .     .    .          .</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1         .     .    .          .</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 2         .     .    .          .</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># ..      ...   ...  ...        ...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>&nbsp;2) 5, 6, 7월을 <code>summer</code>, 그 이외의 달은 <code>others</code>로 구분해주는 <code>season</code>컬럼을 추가하세요. (5)</p>
<ul>
<li><code>season</code> 변수를 카테고리 타입으로 바꾸고, <code>summer</code>, <code>others</code>의 순서대로 순서를 부여하세요.</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#     carrier month hour delay_prop  season</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 0         .     .    .          .  others</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1         .     .    .          .  others</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 2         .     .    .          .  others</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># ..      ...   ...  ...        ...     ...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>&nbsp;3) 이를 이용하여, 대략 다음과 같이 column에 항공사(<code>carrier</code>), row에 계절(<code>season</code>)을 facetting하여 시각화를 구한 후 (디테일은 무시), 눈에 띄는 패턴에 대해 “대략” 기술해보세요. (하루 중 시간이 지남에 따라 지연율이 증가하는 경향을 중심으로) (10)</p>
<ul>
<li>fitted line은 5차 다항함수로 합니다.</li>
</ul>
<div id="cell-51" class="cell">
<div class="cell-output cell-output-display" data-execution_count="65">
<div>
<figure class="figure">
<p><img src="midterm948_files/figure-html/cell-34-output-1.png" width="599" height="445" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="b-3.-출발지연dep_delay이-날씨에-의해-얼마나-영향을-받았는지-알아보고자-합니다." class="level4">
<h4 class="anchored" data-anchor-id="b-3.-출발지연dep_delay이-날씨에-의해-얼마나-영향을-받았는지-알아보고자-합니다.">B-3. 출발지연(<code>dep_delay</code>)이 날씨에 의해 얼마나 영향을 받았는지 알아보고자 합니다.</h4>
<ul>
<li>우선, <code>flights</code>와 <code>weather</code> 데이터를 default인 inner방식으로 merge하여 <code>flights_weather</code> 변수명로 저장 후 진행합니다.
<ul>
<li>앞에서 <code>flights</code>와 <code>weather</code> 데이터를 수정한 경우 다시 import하여 merge하세요.</li>
</ul></li>
<li><code>dep_delay</code>가 음수인 경우 지연되지 않은 것으로 보고 <strong>음수인 값을 모두 0으로 바꿉니다</strong>.</li>
</ul>
<p>&nbsp;1) 바람의 세기(<code>wind_speed</code>)에 따라 평균 출발지연(<code>dep_delay</code>)이 어떻게 변하는지 알아보기 위해, 따로 값을 구하지 않고 seaborn.objects를 직접 이용해 다음과 같은 시각화를 구현해보세요. (디테일은 무시) (10)</p>
<ul>
<li><code>so.Agg()</code>를 이용해 평균값이 그려지도록 하고,</li>
<li>출발지(<code>origin</code>) 공항에 따라 차이가 있는지 구별하고,</li>
<li>fitted line은 5차 다항함수로 합니다.</li>
</ul>
<div id="cell-57" class="cell" data-execution_count="68">
<div class="cell-output cell-output-display" data-execution_count="68">
<div>
<figure class="figure">
<p><img src="midterm948_files/figure-html/cell-37-output-1.png" width="567" height="369" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>&nbsp;2) 이번에는 이슬점(<code>dewp</code>)에 따른 평균 출발지연(<code>dep_delay</code>)에 대해 마찬가지로 시각화해보세요. (5)</p>
<div id="cell-60" class="cell" data-execution_count="121">
<div class="cell-output cell-output-display" data-execution_count="121">
<div>
<figure class="figure">
<p><img src="midterm948_files/figure-html/cell-39-output-1.png" width="567" height="369" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>&nbsp;3) (1)번 플랏에서 특이하게 오래 지연된(출발 지연 평균값이 40이상) 몇 개의 값이 보입니다. 그 지점에 해당하는 날에 강풍 외에도 다른 기상 이변이 있었는지 확인해보고자 합니다. (10)</p>
<ul>
<li>우선, (1)번 플랏에 표시된 값들을 직접 구하는데, <code>flights_weather</code> 테이블에서 출발지(<code>origin</code>)와 바람의 세기(<code>wind_speed</code>)에 따른 <code>dep_delay</code>의 평균값들을 구한 후,</li>
<li>그 값이 40이상인 경우로만 필터링 한 후, 바람의 세기(<code>wind_speed</code>)를 확인해보고,</li>
<li>이 바람의 세기(<code>wind_speed</code>)에 해당하는 관측치만으로 <code>weather</code> 테이블을 필터링하고,</li>
<li>다음의 컬럼들만 선택해 표시하세요.
<ul>
<li><code>["origin", "month", "day", "hour"]</code></li>
<li>기상정보: <code>["temp", "dewp", "humid", "wind_dir", "wind_speed", "wind_gust", "precip", "pressure", "visib"]</code></li>
</ul></li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#     origin  month  day  hour  temp  dewp  humid  wind_dir  wind_speed  ...</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co">#       EWR      1   24    13 24.08 -7.06  24.57    330.00       28.77   ...</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co">#       ...    ...  ...   ...   ...   ...    ...      ...         ...    ...</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co">#       ...    ...  ...   ...   ...   ...    ...      ...         ...    ...</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co">#       ...    ...  ...   ...   ...   ...    ...      ...         ...    ...</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co"># [23 rows x 13 columns]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>&nbsp;4) 이제 3)에서 얻은 테이블로 다음과 같이 출발지(<code>origin</code>)에 따른 각 기상정보들에 대한 평균값을 구하는데, (5)</p>
<ul>
<li><code>tag</code> 컬럼을 추가하여, <code>severe</code>로 모두 표기하세요.</li>
</ul>
<div id="cell-66" class="cell" data-execution_count="72">
<div class="cell-output cell-output-display" data-execution_count="72">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">temp</th>
<th data-quarto-table-cell-role="th">dewp</th>
<th data-quarto-table-cell-role="th">humid</th>
<th data-quarto-table-cell-role="th">wind_dir</th>
<th data-quarto-table-cell-role="th">wind_speed</th>
<th data-quarto-table-cell-role="th">wind_gust</th>
<th data-quarto-table-cell-role="th">precip</th>
<th data-quarto-table-cell-role="th">pressure</th>
<th data-quarto-table-cell-role="th">visib</th>
<th data-quarto-table-cell-role="th">tag</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">origin</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">EWR</td>
<td>40.75</td>
<td>22.62</td>
<td>51.84</td>
<td>187.00</td>
<td>29.34</td>
<td>40.28</td>
<td>0.01</td>
<td>1013.24</td>
<td>9.80</td>
<td>severe</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">JFK</td>
<td>49.89</td>
<td>39.45</td>
<td>71.75</td>
<td>145.00</td>
<td>31.07</td>
<td>42.41</td>
<td>0.02</td>
<td>1007.58</td>
<td>8.44</td>
<td>severe</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">LGA</td>
<td>46.62</td>
<td>34.38</td>
<td>63.80</td>
<td>198.00</td>
<td>32.68</td>
<td>44.02</td>
<td>0.04</td>
<td>1004.57</td>
<td>8.40</td>
<td>severe</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>&nbsp;5) 이번에는 <code>flights_weather</code> 테이블에서 마찬가지로 출발지(<code>origin</code>)에 따른 각 기상정보들에 대한 평균값을 구해보세요. (5)</p>
<ul>
<li>이는 4)에서 얻은 특이한 날에 대한 평균값과 전체 평균값을 비교하기 위함입니다.</li>
<li><code>tag</code> 컬럼을 추가하여, <code>overall</code>로 모두 표기하세요.</li>
</ul>
<div id="cell-68" class="cell" data-execution_count="73">
<div class="cell-output cell-output-display" data-execution_count="73">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">temp</th>
<th data-quarto-table-cell-role="th">dewp</th>
<th data-quarto-table-cell-role="th">humid</th>
<th data-quarto-table-cell-role="th">wind_dir</th>
<th data-quarto-table-cell-role="th">wind_speed</th>
<th data-quarto-table-cell-role="th">wind_gust</th>
<th data-quarto-table-cell-role="th">precip</th>
<th data-quarto-table-cell-role="th">pressure</th>
<th data-quarto-table-cell-role="th">visib</th>
<th data-quarto-table-cell-role="th">tag</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">origin</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">EWR</td>
<td>57.42</td>
<td>41.87</td>
<td>59.47</td>
<td>199.39</td>
<td>10.05</td>
<td>23.93</td>
<td>0.01</td>
<td>1017.76</td>
<td>9.24</td>
<td>overall</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">JFK</td>
<td>56.19</td>
<td>42.18</td>
<td>62.34</td>
<td>204.68</td>
<td>12.23</td>
<td>27.67</td>
<td>0.00</td>
<td>1018.07</td>
<td>9.22</td>
<td>overall</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">LGA</td>
<td>57.37</td>
<td>40.78</td>
<td>56.70</td>
<td>200.59</td>
<td>11.15</td>
<td>24.86</td>
<td>0.00</td>
<td>1017.59</td>
<td>9.31</td>
<td>overall</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>&nbsp;6) 다음과 같이 출발지(<code>origin</code>)에 따라 <code>severe</code>한 경우와 <code>overall</code>을 비교하기 위한 시각화를 해보세요. (15)</p>
<ul>
<li>4)번과 5)번 테이블을 합친 후(concat),</li>
<li>모든 기상 정보들(<code>temp</code>부터 <code>visib</code>까지)이 <code>weather</code>라는 컬럼에 나타나도록 long format으로 바꾼 후,</li>
<li>다음과 같이 <code>weather</code>에 facetting하여 기상정보가 나타나도록 시각화해보세요(3x3배열). (디테일은 무시)
<ul>
<li>x축은 <code>tag</code>로, y축은 기상 정보 값(평균)</li>
<li>출발지(<code>origin</code>)에 따라 구별</li>
</ul></li>
</ul>
<div id="cell-73" class="cell" data-execution_count="130">
<div class="cell-output cell-output-display" data-execution_count="130">
<div>
<figure class="figure">
<p><img src="midterm948_files/figure-html/cell-48-output-1.png" width="698" height="445" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<!-- - 다음 링크에서 이 테이블을 다운받은 후: [링크](https://www.dropbox.com/scl/fi/mqmvt8jmtr9r8edel3p17/weather_diff.csv?rlkey=dfyqiqq5cs2vtzdshrmelqbtf&dl=1)
- 컬럼의 기상정보들(`wind_speed`에서 `visib`까지)에 대해 long form으로 바꾼 후, 아래와 같이 기상정보를 한 줄에 3개씩 나타나도록 facetting하여 다음과 같이 시각화해 보고, 눈에 띄는 점을 간략히 기술해보세요. (15) -->
</section>
</section>
<section id="c.-다음은-movielens-1m-dataset을-이용한-질문입니다." class="level2">
<h2 class="anchored" data-anchor-id="c.-다음은-movielens-1m-dataset을-이용한-질문입니다.">C. 다음은 MovieLens 1M Dataset을 이용한 질문입니다.</h2>
<div id="cell-81" class="cell" data-execution_count="79">
<details class="code-fold">
<summary>Import data (클릭)</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>unames <span class="op">=</span> [<span class="st">"user_id"</span>, <span class="st">"gender"</span>, <span class="st">"age"</span>, <span class="st">"occupation"</span>, <span class="st">"zip"</span>]</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>users <span class="op">=</span> pd.read_table(</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://raw.githubusercontent.com/wesm/pydata-book/3rd-edition/datasets/movielens/users.dat"</span>,</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    sep<span class="op">=</span><span class="st">"::"</span>,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    header<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    names<span class="op">=</span>unames,</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    engine<span class="op">=</span><span class="st">"python"</span>,</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>rnames <span class="op">=</span> [<span class="st">"user_id"</span>, <span class="st">"movie_id"</span>, <span class="st">"rating"</span>, <span class="st">"timestamp"</span>]</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>ratings <span class="op">=</span> pd.read_table(</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://raw.githubusercontent.com/wesm/pydata-book/3rd-edition/datasets/movielens/ratings.dat"</span>,</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>    sep<span class="op">=</span><span class="st">"::"</span>,</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>    header<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>    names<span class="op">=</span>rnames,</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>    engine<span class="op">=</span><span class="st">"python"</span>,</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>mnames <span class="op">=</span> [<span class="st">"movie_id"</span>, <span class="st">"title"</span>, <span class="st">"genres"</span>]</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>movies <span class="op">=</span> pd.read_table(</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://raw.githubusercontent.com/wesm/pydata-book/3rd-edition/datasets/movielens/movies.dat"</span>,</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>    sep<span class="op">=</span><span class="st">"::"</span>,</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>    header<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>    names<span class="op">=</span>mnames,</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>    engine<span class="op">=</span><span class="st">"python"</span>,</span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>또는, 데이터셋 다운로드 링크: <a href="https://www.dropbox.com/s/gg1mbpk6kdkzxsy/users.csv?dl=1">users.csv</a>, <a href="https://www.dropbox.com/s/tvl4eyvk06mjqmw/ratings.csv?dl=1">ratings.csv</a>, <a href="https://www.dropbox.com/s/ei7qse9d92q17lu/movies.csv?dl=1">movies.csv</a></p>
<p>다음 C-1 ~ C-5를 통해 장르와 성별에 따른 (개인별로 표준화된 평점으로) 평균 최고점을 얻은 영화를 구합니다.</p>
<section id="c-1.-우선-ratings-데이터에서-개인별로-몇-개의-영화를-평가했는지를-groupby를-이용해-구한-후-그-결과를-이용해-다음과-같이-개인별-평가-개수에-대한-분포를-frequency-polygon-스타일로-시각화해보세요.-10" class="level4">
<h4 class="anchored" data-anchor-id="c-1.-우선-ratings-데이터에서-개인별로-몇-개의-영화를-평가했는지를-groupby를-이용해-구한-후-그-결과를-이용해-다음과-같이-개인별-평가-개수에-대한-분포를-frequency-polygon-스타일로-시각화해보세요.-10">C-1. 우선, <code>ratings</code> 데이터에서 <strong>개인별</strong>로 몇 개의 영화를 평가했는지를 <code>groupby</code>를 이용해 구한 후, 그 결과를 이용해 다음과 같이 개인별 평가 개수에 대한 분포를 frequency polygon 스타일로 시각화해보세요. (10)</h4>
<ul>
<li><code>binwidth=10</code>로 하고,</li>
<li>x축의 범위는 [0, 1000]으로 제한하세요.</li>
</ul>
<div id="cell-85" class="cell" data-execution_count="80">
<div class="cell-output cell-output-display" data-execution_count="80">
<div>
<figure class="figure">
<p><img src="midterm948_files/figure-html/cell-56-output-1.png" width="465" height="369" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="c-2.-수업-과제에서-살펴보았듯이-개인별로-평가에-대한-편향성이-존재합니다.-이를-해결하기-위한-한-방법으로-개인별로-평점을-표준화해서-이후-진행하려고-합니다.-10" class="level4">
<h4 class="anchored" data-anchor-id="c-2.-수업-과제에서-살펴보았듯이-개인별로-평가에-대한-편향성이-존재합니다.-이를-해결하기-위한-한-방법으로-개인별로-평점을-표준화해서-이후-진행하려고-합니다.-10">C-2. 수업 과제에서 살펴보았듯이 개인별로 평가에 대한 편향성이 존재합니다. 이를 해결하기 위한 한 방법으로, <strong>개인별로</strong> 평점을 <strong>표준화</strong>해서 이후 진행하려고 합니다. (10)</h4>
<ul>
<li>우선, <strong>개인별 표준화</strong>를 위해 필요한 최소 평점 개수를 30개로 정하고, C-1을 이용해 평점을 최소 30개 이상(포함) 남긴 사람들만으로 <code>ratings</code> 데이터를 필터링하고,</li>
<li>이들의 평점을 <strong>개인별 표준화</strong>하여 <code>rating_z</code>라는 변수에 추가하여,
<ul>
<li>표준화는 평균을 빼고 표준편차로 나누는 것을 말합니다.</li>
</ul></li>
<li>대략 다음과 같은 테이블을 구합니다. 예를 들어, <code>user_id</code> 1번에게는 <code>rating</code> 5점이 그 사람의 표준화 점수로는 1.19점에 해당합니다.</li>
</ul>
<div id="cell-90" class="cell" data-execution_count="84">
<div class="cell-output cell-output-display" data-execution_count="84">
<style type="text/css">
#T_a410d th.col_heading {
  text-align: center;
}
#T_a410d td {
  text-align: center;
}
#T_a410d_row0_col0, #T_a410d_row0_col1, #T_a410d_row0_col3, #T_a410d_row0_col4, #T_a410d_row4_col0, #T_a410d_row4_col1, #T_a410d_row4_col3, #T_a410d_row4_col4 {
  background: #afe2ed;
}
#T_a410d_row0_col2, #T_a410d_row0_col5, #T_a410d_row4_col2, #T_a410d_row4_col5 {
  color: #fc4f30;
  background: #afe2ed;
}
#T_a410d_level0_col2, #T_a410d_level0_col5 {
  color: #fc4f30;
}
</style>

<table id="T_a410d" class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th class="blank level0" data-quarto-table-cell-role="th">&nbsp;</th>
<th id="T_a410d_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">user_id</th>
<th id="T_a410d_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">movie_id</th>
<th id="T_a410d_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">rating</th>
<th id="T_a410d_level0_col3" class="col_heading level0 col3" data-quarto-table-cell-role="th">timestamp</th>
<th id="T_a410d_level0_col4" class="col_heading level0 col4" data-quarto-table-cell-role="th">n_ratings</th>
<th id="T_a410d_level0_col5" class="col_heading level0 col5" data-quarto-table-cell-role="th">rating_z</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_a410d_level0_row0" class="row_heading level0 row0" data-quarto-table-cell-role="th">0</td>
<td id="T_a410d_row0_col0" class="data row0 col0">1</td>
<td id="T_a410d_row0_col1" class="data row0 col1">1193</td>
<td id="T_a410d_row0_col2" class="data row0 col2">5</td>
<td id="T_a410d_row0_col3" class="data row0 col3">978300760</td>
<td id="T_a410d_row0_col4" class="data row0 col4">53</td>
<td id="T_a410d_row0_col5" class="data row0 col5">1.19</td>
</tr>
<tr class="even">
<td id="T_a410d_level0_row1" class="row_heading level0 row1" data-quarto-table-cell-role="th">1</td>
<td id="T_a410d_row1_col0" class="data row1 col0">1</td>
<td id="T_a410d_row1_col1" class="data row1 col1">661</td>
<td id="T_a410d_row1_col2" class="data row1 col2">3</td>
<td id="T_a410d_row1_col3" class="data row1 col3">978302109</td>
<td id="T_a410d_row1_col4" class="data row1 col4">53</td>
<td id="T_a410d_row1_col5" class="data row1 col5">-1.75</td>
</tr>
<tr class="odd">
<td id="T_a410d_level0_row2" class="row_heading level0 row2" data-quarto-table-cell-role="th">2</td>
<td id="T_a410d_row2_col0" class="data row2 col0">1</td>
<td id="T_a410d_row2_col1" class="data row2 col1">914</td>
<td id="T_a410d_row2_col2" class="data row2 col2">3</td>
<td id="T_a410d_row2_col3" class="data row2 col3">978301968</td>
<td id="T_a410d_row2_col4" class="data row2 col4">53</td>
<td id="T_a410d_row2_col5" class="data row2 col5">-1.75</td>
</tr>
<tr class="even">
<td id="T_a410d_level0_row3" class="row_heading level0 row3" data-quarto-table-cell-role="th">3</td>
<td id="T_a410d_row3_col0" class="data row3 col0">1</td>
<td id="T_a410d_row3_col1" class="data row3 col1">3408</td>
<td id="T_a410d_row3_col2" class="data row3 col2">4</td>
<td id="T_a410d_row3_col3" class="data row3 col3">978300275</td>
<td id="T_a410d_row3_col4" class="data row3 col4">53</td>
<td id="T_a410d_row3_col5" class="data row3 col5">-0.28</td>
</tr>
<tr class="odd">
<td id="T_a410d_level0_row4" class="row_heading level0 row4" data-quarto-table-cell-role="th">4</td>
<td id="T_a410d_row4_col0" class="data row4 col0">1</td>
<td id="T_a410d_row4_col1" class="data row4 col1">2355</td>
<td id="T_a410d_row4_col2" class="data row4 col2">5</td>
<td id="T_a410d_row4_col3" class="data row4 col3">978824291</td>
<td id="T_a410d_row4_col4" class="data row4 col4">53</td>
<td id="T_a410d_row4_col5" class="data row4 col5">1.19</td>
</tr>
<tr class="even">
<td id="T_a410d_level0_row5" class="row_heading level0 row5" data-quarto-table-cell-role="th">5</td>
<td id="T_a410d_row5_col0" class="data row5 col0">...</td>
<td id="T_a410d_row5_col1" class="data row5 col1">...</td>
<td id="T_a410d_row5_col2" class="data row5 col2">...</td>
<td id="T_a410d_row5_col3" class="data row5 col3">...</td>
<td id="T_a410d_row5_col4" class="data row5 col4">...</td>
<td id="T_a410d_row5_col5" class="data row5 col5">...</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="c-3.-영화movie_id와-성별gender에-따른-표준화된-평점rating_z의-평균을-구하기-위해" class="level4">
<h4 class="anchored" data-anchor-id="c-3.-영화movie_id와-성별gender에-따른-표준화된-평점rating_z의-평균을-구하기-위해">C-3. 영화(<code>movie_id</code>)와 성별(<code>gender</code>)에 따른 표준화된 평점(<code>rating_z</code>)의 평균을 구하기 위해</h4>
<ul>
<li>C-2를 구하지 못한 경우, 파일 <a href="https://www.dropbox.com/scl/fi/soz0tnyvd9h5uio0b8tzf/ratings_30.csv?rlkey=tl3dyfon2puhwub0togzzolbs&amp;dl=1">ratings_30.csv</a>을 다운받아 진행하세요.</li>
<li>우선, C-2의 결과 테이블과 <code>users</code> 데이터를 merge하여, <code>user_ratings</code> 데이터를 만든 후,</li>
<li>영화(<code>movie_id</code>)와 성별(<code>gender</code>)에 따른 표준화된 평점(<code>rating_z</code>)의 평균을 다음 테이블과 같이 구합니다. (10)</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#      movie_id gender mean_rating_z</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 0           .      .             .</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1           .      .             .</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 2           .      .             .</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co"># ...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="c-4.-장르와-성별-내에서-평균-평점이-높은-순으로-순위를-매기기-위해서" class="level4">
<h4 class="anchored" data-anchor-id="c-4.-장르와-성별-내에서-평균-평점이-높은-순으로-순위를-매기기-위해서">C-4. <strong>장르와 성별 내</strong>에서 평균 평점이 높은 순으로 순위를 매기기 위해서,</h4>
<ul>
<li><p>우선, <code>movies</code> 데이터를 다음을 이용해 long format으로 바꾼 후,</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>movies_long <span class="op">=</span> movies.copy()</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>movies_long[<span class="st">"genres"</span>] <span class="op">=</span> movies_long[<span class="st">"genres"</span>].<span class="bu">str</span>.split(<span class="st">"|"</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>movies_long <span class="op">=</span> movies_long.explode(<span class="st">"genres"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>이를 C-3의 결과와 merge하고,</p></li>
<li><p><strong>장르와 성별에 내</strong>에서 “표준화된 평점의 평균”(<code>mean_rating_z</code>)이 높은 순서대로 순위를 매겨 <code>rank</code>라는 변수에 추가하여 다음 형태의 테이블을 구합니다. (10)</p>
<ul>
<li><code>rank()</code>는 <code>min</code> 방식으로 적용합니다.</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#       movie_id gender mean_rating_z title genres rank</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 0            .      .             .     .      .    .</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1            .      .             .     .      .    .</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 2            .      .             .     .      .    .</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co"># ...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="c-5.-이제-c-4의-테이블을-이용하여-장르와-성별에-따라-표준화된-평점-평균이-가장-높은-영화-한편씩을-보여주는-다음과-같은-테이블을-구합니다.-10" class="level4">
<h4 class="anchored" data-anchor-id="c-5.-이제-c-4의-테이블을-이용하여-장르와-성별에-따라-표준화된-평점-평균이-가장-높은-영화-한편씩을-보여주는-다음과-같은-테이블을-구합니다.-10">C-5. 이제 (C-4)의 테이블을 이용하여, 장르와 성별에 따라 <strong>표준화된 평점</strong> 평균이 가장 높은 영화 한편씩을 보여주는 다음과 같은 테이블을 구합니다. (10)</h4>
<ul>
<li><code>pivot()</code>을 이용하여, 장르(<code>genres</code>)별로 성별(<code>gender</code>)이 wide format으로 나타나도록, 그리고 영화제목(<code>title</code>)과 평점(<code>mean_rating_z</code>)이 각각 나타타도록 테이블을 구합니다. (MultiIndex)</li>
</ul>
<div>

</div>
<div id="cell-102" class="cell quarto-layout-panel" data-execution_count="95" data-layout="[[5, 1, 5]]">
<div class="quarto-layout-row">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th colspan="2" style="text-align: left;" data-quarto-table-cell-role="th" data-halign="left">title</th>
<th colspan="2" style="text-align: left;" data-quarto-table-cell-role="th" data-halign="left">mean_rating_z</th>
</tr>
<tr class="even">
<th style="text-align: left;" data-quarto-table-cell-role="th">gender</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">F</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">M</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">F</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">M</th>
</tr>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">genres</th>
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;" data-quarto-table-cell-role="th">Action</td>
<td style="text-align: left;">.</td>
<td style="text-align: left;">.</td>
<td style="text-align: left;">.</td>
<td style="text-align: left;">.</td>
</tr>
<tr class="even">
<td style="text-align: left;" data-quarto-table-cell-role="th">Adventure</td>
<td style="text-align: left;">.</td>
<td style="text-align: left;">.</td>
<td style="text-align: left;">.</td>
<td style="text-align: left;">.</td>
</tr>
<tr class="odd">
<td style="text-align: left;" data-quarto-table-cell-role="th">Animation</td>
<td style="text-align: left;">.</td>
<td style="text-align: left;">.</td>
<td style="text-align: left;">.</td>
<td style="text-align: left;">.</td>
</tr>
<tr class="even">
<td style="text-align: left;" data-quarto-table-cell-role="th">Children's</td>
<td style="text-align: left;">.</td>
<td style="text-align: left;">.</td>
<td style="text-align: left;">.</td>
<td style="text-align: left;">.</td>
</tr>
<tr class="odd">
<td style="text-align: left;" data-quarto-table-cell-role="th">...</td>
<td style="text-align: left;">...</td>
<td style="text-align: left;">...</td>
<td style="text-align: left;">...</td>
<td style="text-align: left;">...</td>
</tr>
<tr class="even">
<td style="text-align: left;" data-quarto-table-cell-role="th">Sci-Fi</td>
<td style="text-align: left;">.</td>
<td style="text-align: left;">.</td>
<td style="text-align: left;">.</td>
<td style="text-align: left;">.</td>
</tr>
<tr class="odd">
<td style="text-align: left;" data-quarto-table-cell-role="th">Thriller</td>
<td style="text-align: left;">.</td>
<td style="text-align: left;">.</td>
<td style="text-align: left;">.</td>
<td style="text-align: left;">.</td>
</tr>
<tr class="even">
<td style="text-align: left;" data-quarto-table-cell-role="th">War</td>
<td style="text-align: left;">.</td>
<td style="text-align: left;">.</td>
<td style="text-align: left;">.</td>
<td style="text-align: left;">.</td>
</tr>
<tr class="odd">
<td style="text-align: left;" data-quarto-table-cell-role="th">Western</td>
<td style="text-align: left;">.</td>
<td style="text-align: left;">.</td>
<td style="text-align: left;">.</td>
<td style="text-align: left;">.</td>
</tr>
</tbody>
</table>

<p>18 rows × 4 columns</p>
</div>
</div>
</div>
<hr>
</section>
<section id="c-6.-이번에는-장르별-평점의-분포-차이를-살펴보는데" class="level4">
<h4 class="anchored" data-anchor-id="c-6.-이번에는-장르별-평점의-분포-차이를-살펴보는데">C-6. 이번에는 장르별 평점의 분포 차이를 살펴보는데,</h4>
<p>&nbsp;1) <strong>장르별</strong>로 각 평점(1, 2, 3, 4, 5)을 몇 개 얻었는지(<code>n</code>)와 <strong>각 장르 내</strong>에서 각 평점이 몇 %를 차지하는지(<code>pct</code>)를 다음 테이블과 같이 구합니다. (10)</p>
<div id="cell-109" class="cell" data-execution_count="100">
<div class="cell-output cell-output-display" data-execution_count="100">
<pre><code>     genres  rating  n pct
0    Action       1  .   .
1    Action       2  .   .
2    Action       3  .   .
3    Action       4  .   .
..      ...     ... ..  ..
86  Western       2  .   .
87  Western       3  .   .
88  Western       4  .   .
89  Western       5  .   .

[90 rows x 4 columns]</code></pre>
</div>
</div>
<p>&nbsp;2) 이를 이용해 대략 다음과 같은 형태로 장르별 평점의 분포를 시각화합니다. (디테일은 무시) (10)</p>
<ul>
<li><strong>평점 5의 비율</strong>이 높은 순서대로 정렬되도록 합니다.</li>
<li>이 플랏으로부터 어떤 (잠정적) 추론을 할 수 있을지 간략히 기술해보세요.</li>
<li>주의: <code>rating</code>의 data type이 floating이 아닌 integer임을 확인하세요.</li>
</ul>
<div id="cell-115" class="cell" data-execution_count="105">
<div class="cell-output cell-output-display" data-execution_count="105">
<div>
<figure class="figure">
<p><img src="midterm948_files/figure-html/cell-79-output-1.png" width="776" height="417" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<!-- ## 보너스 문제 -->
<!-- #### C-7. 개인별(`user_id`)로 특정 장르를 편식해서 보는 패턴을 살펴볼 수 있는 테이블과 그 분포를 만들어 보세요. (15)

- 아이디어는 대략 아래 테이블을 구하는 것인데,
- 예를 들어, `user_id` 2번의 경우,
    - 본인이 내린 평점들 중에 `Action` 장르가 차지하는 비중이 19.4% (`person_pct`)인데 반해,
    - 전체 평점 중 Action 장르는 7.8%(`genres_pct`)를 차지하고 있어서,
    - 그 비율을 보면, 개인적으로 평균보다 19.4/7.8 = 2.48배 더 많은 평점을 내렸습니다. 즉, 평균에 비해 2.48배 더 많이 평가 혹은 시청했다고 볼 수 있습니다.
    - 반대로, `Horror` 장르는 전체 영화에서 5.4%를 차지하지만 개인적으로는 0.7% 밖에 차지하지 않아 평균에 비해 0.7/5.4 = 0.13, 거꾸로 말하면, 1/0.13 = 7.7배 더 적게 평가 혹은 시청했다고 볼 수 있습니다.

        ```python
        #  user_id      genres  n  person_pct  genres_pct  ratio
        # ...
                 2      Action 56       0.194       0.078  2.477
        #        2   Adventure 19       0.066       0.044  1.494
        #        2      Comedy 25       0.087       0.187  0.464
        #        2       Crime 12       0.042       0.033  1.265
        #        2       Drama 79       0.274       0.250  1.097
        #        2     Fantasy  1       0.003       0.011  0.327
        #        2   Film-Noir  1       0.003       0.007  0.506
                 2      Horror  2       0.007       0.054  0.130
        #        2     Mystery  3       0.010       0.017  0.630
        #        2     Romance 24       0.083       0.074  1.134
        #        2      Sci-Fi 17       0.059       0.043  1.370
        #        2    Thriller 31       0.108       0.077  1.402
        #        2         War 15       0.052       0.022  2.334
        #        2     Western  3       0.010       0.011  0.982
        # ...
        ``` -->
<!-- #### C-8. 위의 테이블에서 `ratio`의 분포를 장르별로 아래와 같이 그려보고, 1을 중심으로 대칭인 것과 아닌 것, 또한 좌우로 넓게 퍼진 것과 아닌 것이 의미하는 바를 고려해서, 그래프가 의미하는 바를 간략히 기술해보세요. (5)

- x축을 log스케일로 보기 위해, `.scale(x="log")`을 이용하고
- 플랏의 사이즈는 `.layout(size=(10, 8))`을 이용하면 좋습니다. -->


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/dgdavs\.modellings\.art");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>This work © 2024 by Sungkyun Cho is licensed under CC BY-NC-SA 4.0</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>